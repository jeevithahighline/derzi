<div class="container p-4 mt-3">
  <!-- ðŸ”Ž Search -->

  <div class="row">
    <div class="col-6">
      <div class="heading">
        Orders
      </div>
    </div>
    <div class="col-6">
      <div class="d-flex text-right">
        <!-- Search -->
        <input type="text" class="form-control" placeholder="Search Orders" [(ngModel)]="searchText" />
        <!-- Filters Button -->
        <button mat-raised-button color="primary mleft" [matMenuTriggerFor]="filterMenu" matMenuTriggerRestoreFocus="false">
          Filters
        </button>
      </div>
    </div>
  </div>


  <!-- Filters Panel -->
  <mat-menu #filterMenu="matMenu" [hasBackdrop]="true" [overlapTrigger]="false" class="filter-panel p-3 matmenums">
    <div class="p-2" (click)="$event.stopPropagation()">
      
      <!-- âœ… Date Range -->
      <mat-form-field class="w-full datemenu">
        <mat-label>Date Range</mat-label>
        <mat-date-range-input [rangePicker]="picker">
          <input matStartDate placeholder="Start date" [(ngModel)]="startDate" (click)="$event.stopPropagation()">
          <input matEndDate placeholder="End date" [(ngModel)]="endDate" (click)="$event.stopPropagation()">
        </mat-date-range-input>
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-date-range-picker #picker></mat-date-range-picker>
      </mat-form-field>
  
      <!-- âœ… Order Status -->
      <mat-form-field class="w-full">
        <mat-label>Order Status</mat-label>
        <mat-select [(ngModel)]="selectedStatus" (click)="$event.stopPropagation()">
          <mat-option value="">All</mat-option>
          <mat-option value="pending">Pending</mat-option>
          <mat-option value="completed">Completed</mat-option>
          <mat-option value="cancelled">Cancelled</mat-option>
        </mat-select>
      </mat-form-field>
  
      <!-- âœ… Customer Name -->
      <mat-form-field class="w-full">
        <mat-label>Amount</mat-label>
        <input matInput [(ngModel)]="amount" (click)="$event.stopPropagation()" />
      </mat-form-field>
  
      <!-- âœ… Buttons -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <button mat-stroked-button color="warn" (click)="clearFilters(); $event.stopPropagation()">Clear</button>
        <button mat-raised-button color="primary" (click)="applyFilters(); $event.stopPropagation()">Apply</button>
      </div>
    </div>
  </mat-menu>
  


  <!-- ðŸ“Š Orders Table -->
  <div class="tableparent">
    <table class="table table-striped table-bordered align-middle text-center">
      <thead class="table-light">
        <tr>
          <th>
            <!-- <input type="checkbox" /> -->
             <label class="customcheckbox">
              <input type="checkbox" [(ngModel)]="masterSelected" (change)="checkUncheckAll()">
              <span class="checkmark"></span>
            </label>
          </th>
          <th>Order ID</th>
          <th>Customer</th>
          <th>Date</th>
          <th>Amount</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let order of filteredOrders()">
          <td>
            <!-- <input type="checkbox" /> -->
            <label class="customcheckbox">
              <input type="checkbox" [(ngModel)]="order.isSelected"  (change)="isAllSelected()">
              <span class="checkmark"></span>
            </label>
          </td>
          <td>{{ order.id }}</td>
          <td>{{ order.customer }}</td>
          <td>{{ order.date | date:'dd/MM/yyyy' }}</td>
          <td>{{ order.amount | currency:'BHD' }}</td>
          <td>{{ order.status }}</td>

        </tr>
      </tbody>
    </table>
    <mat-paginator [length]="totalItems" [pageSize]="10" [pageSizeOptions]="[10,25,100]"></mat-paginator>
  </div>
</div>